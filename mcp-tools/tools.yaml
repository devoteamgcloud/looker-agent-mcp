sources:
    looker-source:
        kind: looker
        base_url: ${BASE_URL}
        client_id: ${LOOKER_CLIENT_ID}
        client_secret: ${LOOKER_CLIENT_SECRET}
        verify_ssl: true
        timeout: 600s

tools:
    add_dashboard_element:
        kind: looker-add-dashboard-element
        source: looker-source
        description: |
          add_dashboard_element Tool

          This tool creates a new tile in a Looker dashboard using
          the query parameters and the vis_config specified.
          
          Input:
            - type: json
              example: {"dashboard_id":"344","query_params":{"model":"sales","explore":"orders","fields":["orders.count","orders.total_revenue"]},"vis_config":{"type":"table"},"title":"Orders Summary"}
              description: JSON object with dashboard ID, query parameters, vis_config, and optional title

          Output:
            - type: json
              example: {"tile_id":"12","dashboard_id":"344","url":"https://company.cloud.looker.com/dashboards/344#tile-12"}

    get_dashboards:
        kind: looker-get-dashboards
        source: looker-source
        description: |
          get_dashboards Tool

          Input:
            - type: string
              example: "Sales%"
              description: Optional search string for dashboard names (supports SQL LIKE patterns)

          Output:
            - type: json
              example: [{"id":"344","title":"Sales Overview Q3","url":"https://company.cloud.looker.com/dashboards/344"}]

    get_dimensions:
        kind: looker-get-dimensions
        source: looker-source
        description: |
          get_dimensions Tool

          Input:
            - type: json
              example: {"model_name":"sales","explore_name":"orders"}
              description: Model and explore names

          Output:
            - type: json
              example: [{"name":"orders.count","type":"number"},{"name":"orders.created_date","type":"date"}]

    get_filters:
        kind: looker-get-filters
        source: looker-source
        description: |
          get_filters Tool

          Input:
            - type: json
              example: {"model_name":"sales","explore_name":"orders"}
              description: Model and explore names

          Output:
            - type: json
              example: [{"field":"orders.status","type":"string"},{"field":"orders.region","type":"string"}]

    get_explores:
        kind: looker-get-explores
        source: looker-source
        description: |
          get_explores Tool

          Input:
            - type: string
              example: "sales"
              description: Name of the LookML model

          Output:
            - type: json
              example: ["orders","customers"]

    get_looks:
        kind: looker-get-looks
        source: looker-source
        description: |
          get_looks Tool

          Input:
            - type: string
              example: "Revenue%"
              description: Optional search string for look titles

          Output:
            - type: json
              example: [{"id":"101","title":"Revenue by Region","url":"https://company.cloud.looker.com/looks/101"}]

    get_measures:
        kind: looker-get-measures
        source: looker-source
        description: |
          get_measures Tool

          Input:
            - type: json
              example: {"model_name":"sales","explore_name":"orders"}
              description: Model and explore names

          Output:
            - type: json
              example: [{"name":"orders.count","type":"number"},{"name":"orders.total_revenue","type":"number"}]

    get_models:
        kind: looker-get-models
        source: looker-source
        description: |
          get_models Tool

          Input: none

          Output:
            - type: json
              example: ["sales","marketing"]

    get_parameters:
        kind: looker-get-parameters
        source: looker-source
        description: |
          get_parameters Tool

          Input:
            - type: json
              example: {"model_name":"sales","explore_name":"orders"}

          Output:
            - type: json
              example: [{"name":"region_filter","type":"string"},{"name":"date_filter","type":"date"}]

    make_dashboard:
        kind: looker-make-dashboard
        source: looker-source
        description: |
          make_dashboard Tool

          Input:
            - type: string
              example: "Sales Overview Q3"
              description: Name of the dashboard to create

          Output:
            - type: json
              example: {"id":"344","url":"https://company.cloud.looker.com/dashboards/344"}

    make_look:
        kind: looker-make-look
        source: looker-source
        description: |
          make_look Tool

          Input:
            - type: json
              example: {"title":"Revenue Analysis Q3","description":"Revenue by region","query_params":{"model":"sales","explore":"orders","fields":["orders.count","orders.total_revenue"]},"vis_config":{"type":"table"}}
              description: JSON with title, description, query_params, and vis_config

          Output:
            - type: json
              example: {"id":"101","url":"https://company.cloud.looker.com/looks/101"}

    query:
        kind: looker-query
        source: looker-source
        description: |
          query Tool

          Input:
            - type: json
              example: {"model":"sales","explore":"orders","fields":["orders.count","orders.total_revenue"],"filters":{"orders.status":"completed"},"limit":100}
              description: Query parameters, fields, filters, limit, pivots, etc.

          Output:
            - type: json
              example: [{"orders.count":1000,"orders.total_revenue":50000}]

    query_sql:
        kind: looker-query-sql
        source: looker-source
        description: |
          query_sql Tool

          Input:
            - type: json
              example: {"model":"sales","explore":"orders","fields":["orders.count","orders.total_revenue"],"filters":{"orders.status":"completed"}}
              description: Query parameters

          Output:
            - type: string
              example: "SELECT orders.count, orders.total_revenue FROM orders WHERE orders.status='completed';"

    run_look:
        kind: looker-run-look
        source: looker-source
        description: |
          run_look Tool

          Input:
            - type: string
              example: "101"
              description: Look ID to execute

          Output:
            - type: json
              example: [{"orders.count":1000,"orders.total_revenue":50000}]

toolsets:
    looker_tools:
        - add_dashboard_element
        - get_dashboards
        - get_dimensions
        - get_filters
        - get_explores
        - get_looks
        - get_measures
        - get_models
        - get_parameters
        - make_dashboard
        - make_look
        - query
        - query_sql
        - run_look

